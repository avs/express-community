<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (Win98; I) [Netscape]">
   <meta name="Author" content="Ian Curington">
   <title>isolabel</title>
</head>
<body bgcolor="#92BFBF">

<h1>isolabel</h1>

<h3>Synopsis</h3>

<blockquote>
A mapper module that adds text labels to isolines. It processes
the output from the isoline module and generates a DataObject that can be 
directly displayed.
</blockquote>

<blockquote>
<h4>Input Ports</h4>

<table summary="Input Ports used by isolabel">

<tr>
<td width="100"><font size="-1"><b>Name</b></font></td>
<td width="80"><font size="-1"><b>Type</b></font></td>
<td width="425"><font size="-1"><b>Description</b></font></td>
</tr>
<tr>
<td colspan="4"><hr></td>
</tr>

<tr>
<td width="100"><i>in</i></td>
<td width="80">Mesh + Node Data</td>
<td width="425">input data used to generate labels</td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>

</table>

<h4>Parameters</h4>

<table summary="Parameters used by isolabel">

<tr>
<td width="100"><font size="-1"><b>Name</b></font></td>
<td width="75"><font size="-1"><b>Type</b></font></td>
<td width="300"><font size="-1"><b>Description</b></font></td>
<td width="125"><font size="-1"><b>UI Control</b></font></td>
</tr>
<tr>
<td colspan="4"><hr></td>
</tr>

<tr>
<td width="100"><i>num_labels</i></td>
<td width="75">int</td>
<td width="300">number of labels</td>
<td width="125">UIslider</td>
</tr>

<tr>
<td width="100"><i>format</i></td>
<td width="75">string</td>
<td width="300">formating specification</td>
<td width="125">-</td>
</tr>

<tr>
<td width="100"><i>dec_pnts</i></td>
<td width="75">int</td>
<td width="300">number of decimal points</td>
<td width="125">UIslider</td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>
</table>

<h4>Output Ports</h4>

<table summary="Output Ports used by isolabel">

<tr>
<td width="100"><font size="-1"><b>Name</b></font></td>
<td width="80"><font size="-1"><b>Type</b></font></td>
<td width="425"><font size="-1"><b>Description</b></font></td>
</tr>
<tr>
<td colspan="4"><hr></td>
</tr>

<tr>
<td width="100"><i>out_mesh</i></td>
<td width="80">Mesh</td>
<td width="425">locations of labels</td>
</tr>

<tr>
<td width="100"><i>out_text</i></td>
<td width="80">string[]</td>
<td width="425">text of labels</td>
</tr>

<tr>
<td width="100"><i>out_obj</i></td>
<td width="80">DataObject</td>
<td width="425">directly renderable output object</td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>

</table>
</blockquote>


<h3>Description</h3>

<blockquote>
The isolabel macro generates and displays text annotation labels for isoline
visualizations. It connects to the field output of the isoline module and
generates a Point mesh and an array of string values. The macro also generates
a DataObject which can be viewed directly. In most cases it will only be 
necessary to use the generated DataObject. However if you wish to use the raw 
outputs the Point mesh contains the position of the labels while the string 
array contains the actual label text at each point. The number of labels output 
and number of decimal points displayed can both be controlled through a user 
interface. A text_glyph user interface is also presented so that the text 
display can be controlled. The module is designed to work best when used with an 
isoline module, however it can be used to generate text labels for any Mesh with 
a matching set of scalar Node data.
</blockquote>

<blockquote>
The label placement algorithm is quite simple and works best in a 2D isoline
context.  The module subsamples the input node list at even intervals. This
will generate a series of nodes that are regularly spaced throughout the input
data.  Provided the input nodes are distributed evenly in space the output
nodes should also be evenly distributed.  Although this method works acceptably
in most contexts it should be noted that it is not suitable for animation. Due
to the way the algorithm works the labels move around unpredictably as 
parameters are changed. Hence, for example, recording a moving othroslice with
labels would not be possible. The display DataObject is generated by using a
text_glyph module internally. A standard user interface is displayed for this
module.
</blockquote>

<h3>Inputs</h3>

<blockquote>
<i><b>in</b></i>
</blockquote>

<blockquote>
Reference to a set of Field data which should be used by the module to generate
the text labels. The Field should consist of a Mesh and Node Data. Only the
first set of Node data is used and that Node data must be scalar.
</blockquote>

<h3>Parameters</h3>

<blockquote>
<i><b>num_labels</b></i>
</blockquote>

<blockquote>
A member of the Isolabel_Params parameter block group, this integer value is
used to specify the number of text labels that should be generated.  The UI 
slider component sets a maximum of 50 labels.  If more labels are required the 
parameter can be directly modified.  In theory the macro should be able to 
generate any number of labels.
</blockquote>

<blockquote>
<i><b>format</b></i>
</blockquote>

<blockquote>
A member of the Isolabel_Params parameter block group, this string value is
used to specify the C style formatting specification. This sets how the Node 
data values should be converted into text.  Normally it should not be necessary
to alter this parameter and hence there is no user interface.  Further details
of the use of this parameter can be found in the low-level module
<a href="doc_mod.html#format">documentation</a>.
</blockquote>

<blockquote>
<i><b>dec_pnts</b></i>
</blockquote>

<blockquote>
A member of the Isolabel_Params parameter block group, this integer value is
used to specify the number of decimal points that each text labels should have.
Internally this parameter is used to generate a formatting string that is
passed to the low-level module.
</blockquote>


<h3>Outputs</h3>

<blockquote>
<i><b>out_mesh</b></i>
</blockquote>

<blockquote>
Point mesh containing the locations of each text label. If the input mesh
contains any transformation data this is copied across to the output mesh.
</blockquote>

<blockquote>
<i><b>out_text[]</b></i>
</blockquote>

<blockquote>
String array containing the actual label text that should be displayed.
</blockquote>

<blockquote>
<i><b>out_obj</b></i>
</blockquote>

<blockquote>
The directly renderable output of the isolabel macro. This
contains a DataObject object that can be rendered by the standard data viewers.
The output object will contain the generated text labels placed at the
appropriate positions. The output object is generated internally by a
text_glyph module.  If more control of the display is required the other
outputs can be used.  Alternatively the Functional macro could be used directly.
</blockquote>


<h3>Utility Macros</h3>

<blockquote>
The User Macro isolabel combines the Functional Macro Isolabel with the
UI Macro IsolabelUI and the standard module text_glyph.  The User macro also
makes use of the common parameter block Isolabel_Params to tie the Functional
Macro and UI macro together.
</blockquote>


<h3>Example</h3>

<blockquote>
Two example applications are provided, IsolabelEg1 and IsolabelEg2. These
applications generate text labels for 2D and 3D isoline plots.
</blockquote>


<h3>Files</h3>

<blockquote><i>xp_comm_proj/isolabel/isl_macs.v</i> contains the V definitions of 
the Functional Macro Isolabel, the User macro isolabel, the UI macro IsolabelUI
and the example applications IsolabelEg1 and IsolabelEg2.
</blockquote>


<h3>Other Notes</h3>

<blockquote>
The IsolabelMacs library inherits its process. As this library contains no
procedural code, the process is not important. The modules in the low-level
IsolabelMods library execute under the process specified in that library,
not the process defined in the high-level library.
</blockquote>

<blockquote>
Please refer to AVS documentation for more information on the isoline and 
text_glyph modules. This macro does not use the AG kit, and should not be
confused with AGContour which also contains isoline labels.
</blockquote>


<h3>Authors</h3>

<blockquote><pre>
John Sheehan, <a href="mailto:ianc@avs.com">Ian Curington</a>
Advanced Visual Systems, Ltd.
Hanworth Lane, Chertsey, Surrey, UK
KT16 9JX
</pre>
</blockquote>

<blockquote><pre>
Andrew Dodd
International AVS Centre
</pre></blockquote>


<h3>See Also</h3>

<blockquote>
Isolabel_Params, <a href="doc_mod.html">Isolabel_core</a>, Isolabel,
IsolabelUI, IsolabelEg1, IsolabelEg2.
</blockquote>

</body>
</html>

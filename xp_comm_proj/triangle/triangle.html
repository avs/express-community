<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
   <title>triangle - Interface to Delaunay, Vornoi and Triangle Geometry Library</title>
</head>
<body bgcolor="#92BFBF">

<h1>triangle</h1>

<h3>Synopsis</h3>

<blockquote>
The triangle module is part of a suite of modules for advanced Triangle generation and manipulation.  This includes various methods of triangulation such as Vornoi, Delaunay, Area, Convex Hull, Concave region and triangulation of a regular grid with an arbitrary fault line.  Methods for testing whether a point is inside a triangle and computing the area of a triangle are also provided.
</blockquote>

<blockquote><hr>
<pre>
   module triangle &lt;src_file="tri.cxx",
                    c_src_files="triangle.c barycent.c"&gt;
   {
      string+IPort2 params;

      struct_triangulateio+IPort2 in;

      cxxmethod+req update (
         params+read+req+notify,
         in+read+req+notify,
         out+write,
         vorout+write
      );

      struct_triangulateio+OPort2 out;
      struct_triangulateio vorout;
   };
</pre>
<hr></blockquote>

<h3>Description</h3>

<blockquote>
<p>The modules in the Triangle IAC project expose methods from a triangle manipulation
library so that they can be used within AVS/Express to perform a variety of tasks.
The underlying algorithms come from the "Triangle" library written by Jonathan Richard
Shewchuk.  This library is intended to be a two-dimensional quality mesh generator and
delaunay triangulator.  More information about this library, its purpose and how it can
be used can be found at <a href="http://www.cs.cmu.edu/~quake/triangle.html">http://www.cs.cmu.edu/~quake/triangle.html</a>.
Details of the license that this library is distributed under can be found in the
<a href="LICENSE"><code>LICENSE</code></a> file. This suite of modules has been used
in a large AVS/Express project for geologic modeling.</p>

<p>The triangle library was originally intended to be used as a command line program.
It was only later that it was adapted to be used as an internal library.  Due to this
control over the triangle library is achieved by passing a string containing a list
of parameters to the triangle library.  The triangle module presented here exposes this
functionality in its most basic form.  Any parameters specified in the <code>params</code>
string are passed directly to the triangle library.  Details of the parameters can be
found on the triangle library <a href="http://www.cs.cmu.edu/~quake/triangle.html">home page</a>
or in the <code>triangle.c</code> source code file.  This method provides for the maximum
possible control over the library.  However it does also allow the user to specify incorrect
parameters.  Specifying incorrect parameters may cause the triangle library, and hence
AVS/Express, to crash.</p>

<p>A number of higher-level macros are provided that perform specific tasks.  These
have the necessary parameters already specified and hence should be more reliable. Where
possible these macros should be used instead of accessing the triangle library directly.</p>
</blockquote>


<h3>Inputs</h3>

<blockquote>
<i><b>in</b></i>
</blockquote>

<blockquote>
The input triangle data for the triangle module.  This data should be contained a
struct_triangulateio group and contain all the data necessary to perform the task
specified in the <code>params</code> string.  The data structure is essentially passed
to the triangle library without modification.  If the input triangle data is not
specified correctly the results are not defined.
</blockquote>

<blockquote>
<i><b>params</b></i>
</blockquote>

<blockquote>
The input parameter string for the triangle module.  This string is passed directly
to the triangle library and indicates which functions should be performed on the input
data.  Details of the parameters can be found on the triangle library
<a href="http://www.cs.cmu.edu/~quake/triangle.html">home page</a>
or in the <code>triangle.c</code> source code file.  Examples of typical parameter
strings can be seen in the supplied high-level macros.
</blockquote>


<h3>Outputs</h3>

<blockquote>
<i><b>out</b></i>
</blockquote>

<blockquote>
The output triangle data generated by the triangle module.  The triangle library takes
the input data and parameter string, performs the specified functions and outputs the
generated triangle data using this output.  This output is a struct_triangulateio group.
Links can be made directly to the arrays contained in this group.  Alternatively the
struct_to_field macro can be used to convert the data into an AVS/Express field.
</blockquote>

<blockquote>
<i><b>vorout</b></i>
</blockquote>

<blockquote>
The output voronoi triangle data generated by the triangle module.  The triangle library takes
the input data and parameter string, performs the specified functions and outputs the
generated voronoi triangle data using this output.  This output is a struct_triangulateio group.
Links can be made directly to the arrays contained in this group.
</blockquote>


<h3>Utility Macros</h3>

<blockquote>
<p>A number of utility modules are also provided along with the triangle library.
These perform a number of simpler tasks that are not done directly by the
triangle library.</p>

<ul>

<li>
<p><code>fix_voronoi_edges</code></p>
<p>Edges generated by the voronoi triangulation algorithm can extend away
to infinity.  This module looks for those edges and changes them so that
they can be displayed by the standard AVS/Express viewer.</p>
</li>
<li>
<p><code>compute_triangle_areas</code></p>
<p>This module takes a list of triangles and calculates the area of each triangle.  The triangles are input as arrays of coordinates and
connectivity data.  The calculated areas are output as an array of
floating point numbers.</p>
</li>
<li>
<p><code>point_in_triangle</code></p>
<p>This module takes a list of points and triangles and determines which triangle,
if any, each point intersects with.  It also determines how many points intersect
with each triangle. The triangles are input as arrays of coordinates and
connectivity data.  The points are input as a simple array of coordinates. The
triangle that each point intersects with and the number of points for each triangle
are output as two arrays of integer numbers.</p>
</li>
<li>
<p><code>fault_region</code></p>
<p>This module takes a structured mesh and a fault line and determines which
cells of the structured mesh the fault line crosses.  The fault line is input
as a single array of coordinates that represents a single polyline.  The structured
mesh is input as arrays of coordinates and connectivity.  The module outputs a
mesh that represents the cells that the fault line crossed and a set of cell data
that contains a 1 for each affected cell.  This cell data can be combined with
the original input mesh.</p>
</li>

</ul>

</blockquote>


<h3>Examples</h3>

<blockquote>
<p>The Triangle project contains 8 example applications that provide a good
illustration of what the triangle library is capable of.  Most of these example
use either the ClickSketch or ContinuousSketch modules to create input data.
Those that use the ClickSketch module start out with a blank window and expect
the user to create a polyline.  This is done by clicking the right mouse button
in the viewer window.  You should see you polyline appear in red.  Once you have
completed this you should click the <i>Done</i> button.  This begins the
triangulation process.  Once this has finished the results are shown in the
viewer window.  The ContinuousSketch module is similar except that the user
should hold and drag with the right mouse button to create a trail of points.</p>

<p>The examples supplied are as follows, beginning with the ClickSketch examples.</p>

<h4>ClickSketch Examples</h4>

<ul>

<li>
<code>TriConcavePolygonExample</code><br>
Triangulates the specified Concave polygon.
</li>
<li>
<code>TriConvexHullExample</code><br>
Determines the Convex Hull that surrounds the specified polygon.
</li>
<li>
<code>TriDelauneyTriangulationExample</code><br>
Performs a Delauney triangulation of the specified polygon.
</li>
<li>
<code>TriPointInPolygonExample</code><br>
Performs a Delauney triangulation of the specified polygon. If a point
is picked using a <code>CTRL</code>-click the triangle containing the
picked point is determined and displayed.
</li>
<li>
<code>TriVoronoiExample</code><br>
Performs a Voronoi triangulation of the specified points.
</li>

</ul>

<h4>ContinuousSketch Examples</h4>

<ul>

<li>
<code>TriFaultExample</code><br>
Determines which cells are crossed by the specified fault line and
triangulates the combined fault line and cell mesh.
</li>
<li>
<code>TriMovingRegionExample</code><br>
Determines which cells are crossed by the specified fault region and
triangulates the combined fault region and cell mesh.
</li>
<li>
<code>TriAnimatedRegionExample</code><br>
Determines which cells are crossed by the specified fault region and
triangulates the combined fault region and cell mesh.  The loop module
can be used to rotate the fault region.  The output mesh is retriangulated
after each move.
</li>

</ul>
</blockquote>



<h3>Files</h3>

<blockquote>
<i>xp_comm_proj/triangle/trimods.v</i> contains the V definitions of
the low-level modules triangle, fix_voronoi_edges, compute_triangle_areas,
point_in_triangle and fault_region and the group struct_triangulateio.
</blockquote>


<h3>Other Notes</h3>

<blockquote>
The low-level TriangleMods library containing the low-level modules does not
specify a process. By default the <tt>express</tt> process will be used.
</blockquote>


<h3>Author</h3>

<blockquote>
<pre>
Dr. David Knight,
Advanced Visual Systems, Inc.
</pre>
</blockquote>

<h3>Modifications</h3>

<blockquote>
<pre>
Ma YingLiang,
Manchester Visualization Centre

<a href="andrew.dodd@man.ac.uk">Andrew Dodd</a>,
International AVS Centre
</pre>
</blockquote>


<h3>See Also</h3>

<ul>
<li><a href="dvcc.html">Delauney</a> triangulation macro.</li>
<li><a href="dvcc.html">Voronoi</a> triangulation macro.</li>
<li><a href="dvcc.html">Concave_Tri</a> triangulation macro.</li>
<li><a href="dvcc.html">Convex_Hull</a> triangulation macro.</li>
<li><a href="tri_area.html">Triangulate_Area</a> triangulation macro.</li>
<li><a href="http:/www.cs.cmu.edu/~quake/triangle.html">Triangle</a> library home-page.</li>
<li><a href="http:/www.cs.cmu.edu/~quake/triangle.research.html">Research references</a> used by the triangle library.</li>
</ul>

</body>
</html>


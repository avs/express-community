<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (Win98; I) [Netscape]">
   <meta name="Author" content="Ian Curington">
   <title>EllipseCore</title>
</head>
<body bgcolor="#92BFBF">

<h1>EllipseCore</h1>

<h3>Synopsis</h3>

<blockquote>
Generates a set of 3D ellipse objects, with both polyline ellipse edges and a surface linking the ellipses together.
</blockquote>

<blockquote>
<hr>
<pre>
   module EllipseCore &lt;src_file="ellipse.cxx"&gt; {

      cxxmethod+req+notify_inst update(
         .EllipseParams+req,
         .num_ellipses+read+notify+req,
         .num_points+read+notify+req,
         .aboutxc+read+notify+req,           
         .aboutyc+read+notify+req,           
         .x_dims+read+notify+req,
         .y_dims+read+notify+req,
         .ncoords+write,
         .nconn+write,
         .nquads+write,
         .line_conn+write,
         .quad_conn+write,
         .line_coords+write
      );

      EllipseParams+IPort2 &amp;EllipseParams;

      int num_ellipses =&gt; .EllipseParams.num_ellipses;
      int num_points =&gt; .EllipseParams.num_points;
      float aboutxc =&gt; .EllipseParams.aboutxc;
      float aboutyc =&gt; .EllipseParams.aboutyc;

      float+IPort2 x_dims[num_ellipses];
      float+IPort2 y_dims[num_ellipses];

      int+OPort2 nconn;
      int+OPort2 ncoords;
      int+OPort2 nquads;

      int+OPort2 line_conn[nconn];
      float+OPort2 line_coords[ncoords][3];
      int+OPort2 quad_conn[nquads*4];
   };
</pre>
<hr>
</blockquote>

<h3>Description</h3>

<blockquote>
The EllipseCore module generates the primitive coordinate and connectivity arrays necessary to define a set of ellipses and a tubular connection between those ellipses. Each ellipse is created in the X-Y plane and offset a fixed distance from each other along the Z-axis.  The major and minor axes of the generated ellipses are always aligned with the X and Y axes. A Quad mesh surface is also defined connecting adjacent ellipses into a elliptical tube object.  The actual size and shape of each ellipse is defined by two arrays which specify the maximum size of the ellipse in the x-axis and y-axis.  Four parameters allow control over the number of ellipses, the accuracy of the model and base position for the set of ellipses.
</blockquote>

<blockquote>
The Ellipse project is primarily designed to be an illustration of how geometric objects can be created with the AVS/Express Visualization system.  The technique of generating coordinates and connectivity arrays using custom code and converting those into fields using Field Mapping modules has many applications. To assist in learning from this code both the V script code and the C++ source code are well documented. The code also contains a number of error checking methods that in some cases would not be necessary. However it is important that the programmer is aware of the existence of these problems. Practically this module could be used as the basis of a data visualization method that uses ellipses.  Alternatively the basic method could be used to generate other geometric shapes.
</blockquote>


<h3>Inputs</h3>

<blockquote>
<i><b>x_dims[] y_dims[]</b></i>
</blockquote>

<blockquote>
Arrays specifying the x and y dimensions of each ellipse that is to be generated.  These arrays have a type of float.  In the supplied demonstration these arrays are generated by a random number generator.  However in a practical situation these arrays are likely to be derived from data values.
</blockquote>

<blockquote>
<i><b>&amp;EllipseParams</b></i>
</blockquote>

<blockquote>
Reference to the parameter block, which contains real instances of the  parameters for the EllipseCore module.
</blockquote>

<blockquote>
<b><i>num_ellipses</i></b>
</blockquote>

<blockquote>
The number of ellipses that should be generated. The parameter is of type int.  The x and y array inputs should have this many elements. The minimum number of  ellipses is 2 as this many are needed to generate the connecting quad mesh.  Normally the value of this parameter is found by referring to the parameter  block, which is referenced by the &amp;EllipseParams input.
</blockquote>

<blockquote>
<b><i>num_points</i></b>
</blockquote>

<blockquote>
The number of coordinates that should be generated <b>per</b> ellipse. The parameter is of type int.  The minimum number of points is 4. Normally the value of this parameter is found by referring to the parameter block, which is referenced by the &amp;EllipseParams input.
</blockquote>

<blockquote>
<b><i>aboutxc aboutyc</i></b>
</blockquote>

<blockquote>
The coordinates of the centre point of the stack of ellipses. The parameters are of type float. If the coordinates are non-zero than the ellipses will all be offset horizontally from the origin. Normally the value of this parameter is found by referring to the parameter block, which is referenced by the &amp;EllipseParams input.
</blockquote>


<h3>Outputs</h3>

<blockquote>
<b><i>ncoords line_coords[ncoords][3]</i></b>
</blockquote>

<blockquote>
ncoords is an int variable that specifies the total number of coordinate values that have been generated.  line_coords is a float array that contains the actual coordinates generated by the EllipseCore module.
</blockquote>

<blockquote>
<b><i>nconn line_conn[nconn]</i></b>
</blockquote>

<blockquote>
nconn is an int variable that specifies the number of polyline connections that have been generated.  line_conn is a int array that contains the actual polyline connectivity data generated by the EllipseCore module.  This data and the ellipse coordinates are passed to a polyline_mesh module in the Ellipse macro.  This generates a usable polyline mesh that can be displayed.
</blockquote>

<blockquote>
<b><i>nquads quad_conn[nquads*4]</i></b>
</blockquote>

<blockquote>
nquads is an int variable that specifies the number of quadrilaterals that have been generated.  quad_conn is a int array that contains the actual quadrilateral connectivity data generated by the EllipseCore module.  This data and the ellipse coordinates are passed to a quad_mesh module in the Ellipse macro.  This generates a usable quad mesh that can be displayed.
</blockquote>


<h3>Utility Modules</h3>

<blockquote>
The low-level EllipseCore module is used in the Functional Macro Ellipse.  This Functional Macro is used within the User Macro ellipse. The low-level EllipseCore module also makes use of the EllipseParams common parameter block.
</blockquote>


<h3>Example</h3>

<blockquote>
An example application EllipseEg is provided that uses a set of random data to generate an elliptical tube.  It shows how the size and shape of the ellipse can altered through a User Interface.  The random data is generated using a set seed value hence the same data will be generated each time the example application is used.
</blockquote>


<h3>Files</h3>

<blockquote>
<i>xp_comm_proj/ellipse/ell_mods.v</i> contains the V definitions of the 
EllipseCore module and the EllipseParams parameter blocks.
</blockquote>

<h3>Other Notes</h3>

<blockquote>
The low-level EllipseMods library containing the module EllipseCore does 
not specify a process. By default the express process will be used.
</blockquote>


<h3>Author</h3>

<blockquote>
<pre>
Steve Larkin
Advanced Visual Systems, Ltd.
Hanworth Lane, Chertsey Surrey, UK
KT16 9JX
</pre>
</blockquote>

<blockquote><pre>
Andrew Dodd
International AVS Centre
</pre></blockquote>


<h3>See Also</h3>

<blockquote>
<a href="../common/doc_mod.html#RandomNumCore">RandomNumCore</a>, Ellipse,
<a href="doc_umac.html">ellipse</a>, EllipseEg,
Mesh mappers library
</blockquote>

</body>
</html>


<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (Win98; I) [Netscape]">
   <meta name="Author" content="Ian Curington">
   <title>plane_proj</title>
</head>
<body bgcolor="#92BFBF">

<h1>plane_proj</h1>

<h3>Synopsis</h3>

<blockquote>
A mapper module that slices an unstructured or irregular 3D model with a plane, producing a secondary 2D slice projected flat down the normal of the slice plane, for projection into secondary 2D view window.
</blockquote>

<blockquote><hr>
<pre>
module plane_proj &lt;src_file="planep.c"&gt; {
   Mesh+Iparam &amp;in {
      nnodes+req;
   };
   Plane_Grid+Xform+Iparam &amp;plane {
      points+req;
   };

   omethod+notify_val plane_proj_update&lt;status=1&gt; = "plane_proj_update";

   Node_Data+Vector+Float+Oparam out;
   float+Oparam dist;
}; 
</pre>
<hr></blockquote>

<h3>Description</h3>

<blockquote>
<p><tt>plane_proj</tt> is a low-level mapper module that takes a 3D slice of data and returns a 2D plane projected flat along the normal of the slice plane.  This 2D plane can be used for projection into an ancillary 2D view.  This low-level module should not normally be used.  The functional macro <tt>plane_proj2</tt>, and the user macros <tt>plane_project</tt> and <tt>plane_project_ARR</tt> are all easier to use and provide more functionality.</p>

<p>The <tt>plane_proj</tt> module is used in the <tt>plane_project</tt> and <tt>plane_project_ARR</tt> user macros.  These macros are variations on the standard slice_plane module, which slices a 3D model by using a simple plane tool. This low-level module is used to extend the basic functionality by generating a transformed version of the slice plane with Z=0.  The module modifies the actual mesh coordinates, rather than manipulating the Xform block of the field.  This allows for any input structure or incoming transform.</p>

<p>The low-level module implementation contains a new C method. The source code provided can also serve as an example of how to manipulate transformation matrices within a mapper module.</p>
</blockquote>

<h3>Inputs</h3>

<blockquote><b><i>&amp;in</i></b></blockquote>

<blockquote>
Mesh representing the 3D slice taken from the original model.  This will be typically generated by using the DVplane_dist module to generate distances from a plane and the DViso module to calculate an isosurface at a specified distance from the plane.  These operations are performed automatically be the plane_proj2 macro and all higher level user macros.
</blockquote>

<blockquote><b><i>&amp;plane</i></b></blockquote>

<blockquote>
Mesh representing the plane originally used to generate the 3D slice given as the input.  The plane input is necessary so that the 3D slice can be correctly projected onto a 2D plane.
</blockquote>



<h3>Outputs</h3>

<blockquote><b><i>out</i></b></blockquote>

<blockquote>
Node data containing the new 2D coordinates generated by the low-level module.  The <tt>plane_proj</tt> module projects each node in the input data onto the 2D plane and outputs the generated coordinates as a new set of node data.  The <tt>plane_proj2</tt> module uses this data to generate a 2D mesh that can be visualized as normal.
</blockquote>

<blockquote><b><i>dist</i></b></blockquote>

<blockquote>
Floating point value that outputs the scalar distance used in the plane equation.
</blockquote>



<h3>Utility Modules</h3>

<blockquote>The low-level <tt>plane_proj</tt> module is used in the <tt>plane_proj2</tt> functional macro.  This macro is in turned used by the user macros <tt>plane_project</tt> and <tt>plane_project_ARR</tt>.  These user macros also use the <tt>PlaneProjectUI</tt> user interface macro.</blockquote>


<h3>Example</h3>

<blockquote>Two example applications are provided with this project.  PlaneProjectEg demonstrates the use of the standard user macro by reading in a set of data and using the plane_project macro to slice the data and generate a 2D projection of that slice.  PlaneProjectArrEg demonstrates the use of the array based user macro in a similar way.</blockquote>


<h3>Files</h3>

<blockquote>
<p><i>xp_comm_proj/planep/plp_mods.v</i> contains the V definitions of the plane_proj low-level module and the plane_proj2 functional macro.</p>
</blockquote>


<h3>Other Notes</h3>

<blockquote>
<p>The user macros provided with this project are derived from the standard AVS module "Slice Plane".  These macros are based on the same underlying system, but substitute the slice plane processing module and adds a new 2D output port.  Please refer to the documentation for that module for further information on the use of the macros.</p>

<p>The low-level PlaneProjectMods library containing the module does not specify a process. By default the <tt>express</tt> process will be used.</p>
</blockquote>


<h3>Author</h3>

<blockquote>
<pre>Ian Curington
Advanced Visual Systems, Ltd.
Hanworth Lane, Chertsey Surrey, UK
KT16 9JX

ianc@avs.com</pre>
</blockquote>


<h3>Modifications</h3>

<blockquote>
<pre>Andrew Dodd
International AVS Centre
</pre>
</blockquote>


<h3>See Also</h3>

<blockquote>Standard AVS slice_plane module</blockquote>

</body>
</html>


<!doctype html public "-//w3c//dtd html 4.01 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title>background_generator - generate shaded background images</title>
</head>
<body bgcolor="#92BFBF">

<h1>background_generator</h1>

<h3>Synopsis</h3>

<blockquote>The background_generator macro generates a shaded color image field that can be used as a background to another image or model.</blockquote>

<blockquote>
<h4>Input Ports</h4>

<table summary="Input Ports used by background_generator">

<tr>
<td width="100"><font size="-1"><b>Name</b></font></td>
<td width="75"><font size="-1"><b>Type</b></font></td>
<td width="425"><font size="-1"><b>Description</b></font></td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>

<tr>
<td width="100"><i>in</i></td>
<td width="75">Image ARGB</td>
<td width="425">Optionally specifies output image dimensions</td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>

</table>

<h4>Parameters</h4>

<table summary="Parameters used by background_generator">

<tr>
<td width="150"><font size="-1"><b>Name</b></font></td>
<td width="75"><font size="-1"><b>Type</b></font></td>
<td width="300"><font size="-1"><b>Description</b></font></td>
<td width="125"><font size="-1"><b>UI Control</b></font></td>
</tr>
<tr>
<td colspan="4"><hr></td>
</tr>

<tr>
<td width="150">
<i>Upper_Left_Hue</i><br>
<i>Upper_Left_Sat</i><br>
<i>Upper_Left_Value</i>
</td>
<td width="50">float</td>
<td width="300">HSV values for upper left corner of image.</td>
<td width="100">UIslider</td>
</tr>

<tr>
<td width="150">
<i>Upper_Right_Hue</i><br>
<i>Upper_Right_Sat</i><br>
<i>Upper_Right_Value</i>
</td>
<td width="50">float</td>
<td width="300">HSV values for upper right corner of image.</td>
<td width="100">UIslider</td>
</tr>

<tr>
<td width="150">
<i>Lower_Left_Hue</i><br>
<i>Lower_Left_Sat</i><br>
<i>Lower_Left_Value</i>
</td>
<td width="50">float</td>
<td width="300">HSV values for lower left corner of image.</td>
<td width="100">UIslider</td>
</tr>

<tr>
<td width="150">
<i>Lower_Right_Hue</i><br>
<i>Lower_Right_Sat</i><br>
<i>Lower_Right_Value</i>
</td>
<td width="50">float</td>
<td width="300">HSV values for lower right corner of image.</td>
<td width="100">UIslider</td>
</tr>

<tr>
<td width="150">
<i>X_Resolution</i><br>
<i>Y_Resolution</i>
</td>
<td width="50">int</td>
<td width="300">Dimensions of output image if no input mesh specified.</td>
<td width="100">UIslider</td>
</tr>

<tr>
<td width="150"><i>Dither</i></td>
<td width="50">boolean</td>
<td width="300">Specifies if noise should be applied to image.</td>
<td width="100">UItoggle</td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>
</table>

<h4>Output Ports</h4>

<table summary="Output Ports used by background_generator">

<tr>
<td width="100"><font size="-1"><b>Name</b></font></td>
<td width="75"><font size="-1"><b>Type</b></font></td>
<td width="425"><font size="-1"><b>Description</b></font></td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>

<tr>
<td width="100"><i>out_fld</i></td>
<td width="75">Image ARGB</td>
<td width="425">Generated background image.</td>
</tr>

<tr>
<td width="100"><i>out_obj</i></td>
<td width="75">GDobject</td>
<td width="425">Directly renderable output object.</td>
</tr>

<tr>
<td colspan="4"><hr></td>
</tr>

</table>
</blockquote>


<h3>Description</h3>

<blockquote>
<p>The background_generator macro generates a linearly-shaded image that can typically be used as a background for other renderings.  The macro generates this background image by evenly blending the colour of each corner towards the centre of the image.  The user can specify the color of each corner by using the Hue-Saturation-Value colour model.  The user can also specify the dimensions of the generated image and whether dithering should be applied to the generated image.</p>

<p>The results of the background_generator macro can be used with the replace_alpha and composite IAC modules to create the effect of a semi-transparent tinted film overlaid upon a regular image.  For example, the module could generate a background that vertically blends from grey to white.  If this image was composited with an image of a sunny sky an overcast scene could be created.  To help with compositing images together the background_generator module has a mesh input port.  If an image is input to this port the module uses it to specify the dimensions of the generated background image.  Hence the sizes of foreground and background images can be easily matched.</p>

<p>The image generated by the background_generator macro can also be used as the background to a viewer window if the generated image is input into the <a href="t_c_bg.html">textured_background</a> macro.

<p>This module is a conversion of the AVS5 "background" module. The module
implementation has been converted to C++, and has a new user interface. The low-level code operates on simple byte arrays rather than fields.</p>
</blockquote>


<h3>Inputs</h3>

<blockquote><b><i>in</i></b></blockquote>

<blockquote>If a 2D image field is presented on this port it is used to specify the size of the generated output image field.  This input is option.  If no image field is given the dimensions specified by parameters will be used.</blockquote>


<h3>Parameters</h3>

<blockquote>

<table summary="HSV Parameters">

<tr>
<td width="120">
<b><i>Upper_Left_Hue<br>
Upper_Left_Sat<br>
Upper_Left_Value</i></b></td>
<td width="120">
<b><i>Upper_Right_Hue<br>
Upper_Right_Sat<br>
Upper_Right_Value</i></b></td>
</tr>

<tr>
<td width="120">
<b><i>Lower_Left_Hue<br>
Lower_Left_Sat<br>
Lower_Left_Value</i></b></td>
<td width="120">
<b><i>Lower_Right_Hue<br>
Lower_Right_Sat<br>
Lower_Right_Value</i></b></td>
</tr>

</table>
</blockquote>

<blockquote>
<p>The shading of the generated background image is calculated by blending the colours at the corners towards the centre of the image.  The colours of the 4 corners of the image are specified by the parameters shown in the table above.  The colours are specified in the Hue-Saturation-Value colour model.</p>

<p>In the HSV colour model Hue states what is generally known as colour.  Example values for Hue are shown below.  Saturation states how much white should be added to the Hue.  Value states how much black should be subtracted from the Hue.  Values for Hue, Saturation and Value should all be in the range 0 to 1.</p>

<table summary="Hue Values">

<tr>
<td width="120">
<b><i>Hue Value</i></b></td>
<td width="120">
<b><i>Colour</i></b></td>
</tr>

<tr>
<td width="120">0.0</td>
<td width="120">red</td>
</tr>
<tr>
<td width="120">0.1667</td>
<td width="120">yellow</td>
</tr>
<tr>
<td width="120">0.3333</td>
<td width="120">green</td>
</tr>
<tr>
<td width="120">0.5</td>
<td width="120">cyan</td>
</tr>
<tr>
<td width="120">0.6667</td>
<td width="120">blue</td>
</tr>
<tr>
<td width="120">0.8333</td>
<td width="120">magenta</td>
</tr>
<tr>
<td width="120">1.0</td>
<td width="120">red</td>
</tr>

</table>
</blockquote>

<blockquote>
<b><i>X Resolution</i></b><br>
<b><i>Y Resolution</i></b>
</blockquote>

<blockquote>
If no input is present, these resolution parameters are used to specify the dimensions of the output image in pixels.
</blockquote>

<blockquote><b><i>Dither</i></b></blockquote>

<blockquote>
This boolean parameter specifies if dithering should be applied to the image.  If the background image was closely examined coloured contour bands would be noticed.  These occur when the module interpolates a small range of colors over a large screen distance.  If dithering is specified random noise is added to the lower bits of the color to smooth out this contouring effect.  The module takes longer to execute if dithering is turned on.</blockquote>

<h3>
<b>Outputs</b></h3>

<blockquote><b><i>out_fld</i></b></blockquote>

<blockquote>Output field containing the generated background image.  The image is output as a 2D uniform scalar byte field containing node data with ARGB colour components.</blockquote>

<blockquote><b><i>out_obj</i></b></blockquote>

<blockquote>The GDobject version of the output, suitable for direct connection
to the viewer.  A 2D viewer is recommended.</blockquote>


<h3>Utility Macros</h3>

<blockquote>The functional macro BackgroundFunc uses the low-level module BackgroundCore.  The user macro background_generator uses this functional macro and the user interface macro BackgroundUI.  The BackgroundParams parameter block is used to connect these components together.</blockquote>


<h3>Example</h3>

<blockquote>The BackgroundEg example application creates a background image
and shows it in a 2D viewer.</blockquote>


<h3>Files</h3>

<blockquote>
<p><i>xp_comm_proj/backgrnd/bg_mods.v</i> contains the V definitions of the BackgroundCore module and the BackgroundParams and RGB_BackgroundParams parameter blocks.</p>

<p><i>xp_comm_proj/backgrnd/bg_macs.v</i> contains the V definitions of the BackgroundUI and RGB_BackgroundUI UI macro, the BackgroundFunc functional macro and the background, textured_background and coloured_background user macros.</p>

<p><i>xp_comm_proj/backgrnd/bg_apps.v</i> contains the V definition of the BackgroundEg, TexturedBackgroundEg and ColouredBackgroundEg example applications.</p>
</blockquote>


<h3>Other Notes</h3>

<blockquote>The low-level BackgroundMods library containing the BackgroundCore module does not specify a process. By default the <tt>express</tt> process will be used.</blockquote>


<h3>Authors</h3>

<blockquote><pre>
Sabreen Vig, Larry Gelberg, Ian Curington
Advanced Visual Systems, Inc.
</pre></blockquote>

<h3>Modifications</h3>

<blockquote><pre>
Andrew Dodd, International AVS Centre
</pre></blockquote>


<h3>See Also</h3>

<ul>
<li>AVS5 background module, from which this one is derived.</li>
<li><a href="t_c_doc.html">textured_background</a> user macro.</li>
<li><a href="t_c_doc.html">coloured_background</a> user macro.</li>
<li><a href="..\repalpha\repalpha.html">replace_alpha</a> IAC module.</li>
<li><a href="..\comp\comp.html">composite</a> IAC module.</li>
</ul>

</body>
</html>

